version: '3.8'
services:
  n8n-orchestrator:
    build: .
    container_name: n8n-orchestrator
    ports:
      - "3535:3535"
    environment:
      - PORT=3535
      - N8N_API_URL=http://n8n:5678
      - N8N_API_KEY=change_me
      # AI Configuration - Default to OpenRouter
      # 1. OpenRouter (Recommended)
      - AI_BASE_URL=https://openrouter.ai/api/v1
      - AI_API_KEY=change_me
      - AI_MODEL=anthropic/claude-3-sonnet
      - USER_NAME=Admin
      # 2. Local Ollama (Uncomment to use)
      # - AI_BASE_URL=http://host.docker.internal:11434/v1
      # - AI_API_KEY=ollama
      # - AI_MODEL=llama3
      - DATABASE_URL=file:/app/data/dev.db
    volumes:
      - ./_bmad:/app/_bmad:ro
      - ./data:/app/data
    networks:
      - nginx_default

networks:
  nginx_default:
    external: true
